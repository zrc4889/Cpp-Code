#include <bits/stdc++.h>
int n, m, k;
const int _ = 255;
int w[_], h[_], c[_];
int mmap[_][_], top[_];
int sum = 0;
/*
    ，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，＃＃＃＃＃＃＃，，，＃＃＃＃＃＃，，，，，，，
，，，，，，，＃＃＃＃＃＃＃，，，＃＃＃＃＃＃，，，，，，，
，，，，，，，，，＃＃＃＃，，，，，＃＃＃，，，，，，，，，
，，，，，，，，，，＃＃＃，，，，＃＃＃，，，，，，，，，，
，，，，，，，，，，＃＃＃＃，，＃＃＃，，，，，，，，，，，
，，，，，，，，，，，＃＃＃，，＃＃，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃＃，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，，＃＃，＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃，＃＃＃＃，，，，，，，，，，，
，，，，，，，，，，＃＃＃，，，＃＃＃，，，，，，，，，，，
，，，，，，，，，＃＃＃，，，，＃＃＃＃，，，，，，，，，，
，，，，，，，，＃＃＃，，，，，，＃＃＃＃，，，，，，，，，
，，，，，，，＃＃＃＃，，，，，，＃＃＃＃＃，，，，，，，，
，，，，，，＃＃＃＃＃＃，，，＃＃＃＃＃＃＃＃＃，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，＃＃＃＃＃＃＃，，，，＃＃＃＃＃＃，，，，，，，
，，，，，，＃＃＃＃＃＃＃，，，，，＃＃＃＃＃，，，，，，，
，，，，，，，，＃＃＃＃，，，，，，＃＃＃，，，，，，，，，
，，，，，，，，，＃＃＃，，，，，，＃＃，，，，，，，，，，
，，，，，，，，，＃＃＃＃，，，，＃＃＃，，，，，，，，，，
，，，，，，，，，，＃＃＃，，，＃＃＃，，，，，，，，，，，
，，，，，，，，，，＃＃＃＃，，＃＃，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃，＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃＃＃＃，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，＃＃＃＃＃＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃＃＃＃＃＃，＃，，，，，，，，，
，，，，，，，，，，＃＃＃＃＃＃＃＃＃＃＃，，，，，，，，，
，，，，，，，，，＃＃＃＃，，，，，＃＃＃＃，，，，，，，，
，，，，，，，，＃＃＃＃，，，，，，，＃＃＃，，，，，，，，
，，，，，，，＃＃＃＃，，，，，，，，＃＃＃，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，，，＃＃，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，，，，，，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，，，，，，，，，，，，，
，，，，，，＃＃＃＃，，，，，，，，，，，，，，，，，，，，
，，，，，，＃＃＃＃，，，，，，，，，，，，，，，，，，，，
，，，，，，＃＃＃＃，，，，，，，，，，，，，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，，，，，，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，，，，，，，，，，，，，
，，，，，，，＃＃＃＃，，，，，，，，，＃＃，，，，，，，，
，，，，，，，，＃＃＃＃，，，，，，，＃＃＃，，，，，，，，
，，，，，，，，＃＃＃＃＃，，，，，＃＃＃，，，，，，，，，
，，，，，，，，，＃＃＃＃＃＃＃＃＃＃＃，，，，，，，，，，
，，，，，，，，，，，＃＃＃＃＃＃＃＃，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，＃＃＃＃＃＃＃，，，，＃＃＃＃＃＃，，，，，，，
，，，，，，＃＃＃＃＃＃＃，，，，，＃＃＃＃＃，，，，，，，
，，，，，，，，＃＃＃＃，，，，，，＃＃＃，，，，，，，，，
，，，，，，，，，＃＃＃，，，，，，＃＃，，，，，，，，，，
，，，，，，，，，＃＃＃＃，，，，＃＃＃，，，，，，，，，，
，，，，，，，，，，＃＃＃，，，＃＃＃，，，，，，，，，，，
，，，，，，，，，，＃＃＃＃，，＃＃，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃，＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃＃＃＃，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，＃＃＃＃＃＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，＃＃＃＃＃＃＃，，，，＃＃＃＃＃＃，，，，，，，
，，，，，，＃＃＃＃＃＃＃，，，，，＃＃＃＃＃，，，，，，，
，，，，，，，，＃＃＃＃，，，，，，＃＃＃，，，，，，，，，
，，，，，，，，，＃＃＃，，，，，，＃＃，，，，，，，，，，
，，，，，，，，，＃＃＃＃，，，，＃＃＃，，，，，，，，，，
，，，，，，，，，，＃＃＃，，，＃＃＃，，，，，，，，，，，
，，，，，，，，，，＃＃＃＃，，＃＃，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃，＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃＃＃＃，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，，＃＃，，，，，，，，，，，，，，，
，，，，，，，，，，，，＃＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，＃＃＃＃＃＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，＃＃＃＃＃＃＃＃＃＃＃，，，，，，，，，，，，，
，，，，，，，＃＃＃＃＃，＃＃＃＃＃＃，，，，，，，，，，，
，，，，，，，，，＃＃，，，，，＃＃＃＃，，，，，，，，，，
，，，，，，，，，＃＃，，，，，，＃＃＃＃，，，，，，，，，
，，，，，，，，，＃＃，，，，，，，＃＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃＃，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃＃，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，，，＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，，＃＃＃＃，，，，，，，，
，，，，，，，，，＃＃，，，，，，＃＃＃＃，，，，，，，，，
，，，，，，，，，＃＃，，，，，＃＃＃＃，，，，，，，，，，
，，，，，，，，＃＃＃＃，，＃＃＃＃＃，，，，，，，，，，，
，，，，，，＃＃＃＃＃＃＃＃＃＃＃＃，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，＃＃＃＃＃＃＃，，，，，，，，，，，，，
，，，，，，，，，＃＃＃＃＃＃＃＃＃＃＃＃，，，，，，，，，
，，，，，，，，＃＃＃＃＃，，，＃＃＃＃＃，，，，，，，，，
，，，，，，，＃＃＃＃，，，，，，＃＃＃＃，，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，＃＃＃，，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，，＃＃，，，，，，，，，
，，，，，，，，＃＃＃，，，，，，，，＃＃，，，，，，，，，
，，，，，，，，＃＃＃＃＃，，，，，，，，，，，，，，，，，
，，，，，，，，，＃＃＃＃＃＃＃＃，，，，，，，，，，，，，
，，，，，，，，，，，＃＃＃＃＃＃＃＃，，，，，，，，，，，
，，，，，，，，，，，，，，，＃＃＃＃＃，，，，，，，，，，
，，，，，，，，，，，，，，，，，＃＃＃＃，，，，，，，，，
，，，，，，，＃＃，，，，，，，，，＃＃＃，，，，，，，，，
，，，，，，，＃＃，，，，，，，，，＃＃＃，，，，，，，，，
，，，，，，，＃＃＃，，，，，，，，＃＃＃，，，，，，，，，
，，，，，，，＃＃＃＃，，，，，，＃＃＃＃，，，，，，，，，
，，，，，，，＃＃＃＃＃＃＃＃＃＃＃＃＃，，，，，，，，，，
，，，，，，，＃＃＃＃＃＃＃＃＃＃＃＃，，，，，，，，，，，
，，，，，，，，，，，，，＃＃＃，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，
，，，，，，，，，，，，，，，，，，，，，，，，，，，，，，a
*/
int main()
{
    // #ifdef LOCAL
    //     LOCALfo
    // #endif
    freopen("block.in", "r", stdin);
    freopen("block.out", "w", stdout);
    scanf("%d%d%d", &n, &m, &k);
    for (int i = 1; i <= k; ++i)
        scanf("%d%d%d", &w[i], &h[i], &c[i]);
    for (int i = 1; i <= k; ++i)
    {
        sum++;
        int q = c[i] + w[i] - 1;
        int ttop = 0;
        for (int j = c[i]; j <= q; ++j)
            ttop = std::max(ttop, top[j]);
        if (ttop + h[i] > n)
            return printf("ANGRY!!!\n%d", sum), 0;
        for (int j = c[i]; j <= q; ++j)
        {
            top[j] = ttop + h[i];
            for (int p = ttop + h[i]; p >= ttop + 1; --p)
                mmap[p][j] = 1;
        }
    }
    for (int i = n; i >= 1; --i)
    {
        for (int j = 1; j <= m; ++j)
        {
            if (mmap[i][j] == 1)
                printf("#");
            else
                printf(".");
        }
        printf("\n");
    }
    return 0;
}
